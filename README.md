# Grocery Store
## Виртуальный супермаркет: товары и категории

Grocery Store - виртуальный супермаркет, продающий товары, принадлежащие к разным категориям (e.g. "Мясо и птица", "Выбор супермаркета" и т. д.).

В данном репозитории содержится код API для взаимодействия с информацией о товарах.

### Для удобства тестирования:

Модели добавлены в админку.

Добавлены .csv файлы вместе со специальной management-командой для заполнения БД.

Добавлена ссылка на готовую коллекцию запросов в Postman.

Проект упакован в контейнеры Docker для локального запуска.

### Технологии:

Python 3.10, Django 4.2, DRF 3.14, Docker Compose, PostgreSQL 13.0, Gunicorn 21.2, Nginx 1.21

### Описание функционала API:

Товар можно создать, изменить, удалить (товар отмечается как удалённый, но не удаляется из БД), а также можно получить список товаров. Категорию можно создать/удалить. Категория удаляется только в случае, если к ней не отнесён ни один товар.

При создании товара должно быть указано 2-10 категорий, к которым он относится. Товар можно относить только к уже существующим категории.

Примечание: на данный момент ограничение, которое обязывает товар принадлежать min к 2 категориям и max к 10 категориям, установлено только на уровне сериализатора и на уровне формы в админке, но не на уровне базы данных.

Настроены фильтрация и поиск товаров:

Фильтрация товаров:
- по названию категории
- по цене (от - до)
- по опубликованности
- по отметке об удалении

Поиск товаров:
- по названию (по вхождению строки в название товара)

Спецификация API (доступна по указанным адресам после локального запуска):
http://127.0.0.1/api/schema/swagger-ui/
http://127.0.0.1/api/schema/redoc/

### Запуск проекта локально

Склонируйте репозиторий:

```git clone git@github.com:tanja-ovc/products_nimax.git```

либо

```git clone https://github.com/tanja-ovc/products_nimax.git```

Создайте файл с названием .env в директории products_nimax/grocerystore (там же, где .env.example) и заполните его данными из файла .env.example.

При необходимости установите Docker Desktop для вашей операционной системы (https://www.docker.com/products/docker-desktop/) и запустите его.

Перейдите в директорию с файлом docker-compose и оттуда выполните команду:

```docker-compose up -d```

Для пересборки образа (в случае обновления кода) дополните команду так:

```docker-compose up -d --build```

Примените миграции:

```docker-compose exec web python manage.py migrate```

Соберите статику:

```docker-compose exec web python manage.py collectstatic --no-input```

### Тестирование API

Для удобства тестирования по желанию 

- создайте суперюзера (чтобы посмотреть админку):

```docker-compose exec web python manage.py createsuperuser```

- выполните команду загрузки тестовых данных в БД:

```docker-compose exec web python manage.py populate_db```

Готовой коллекцией запросов к данному API можно воспользоваться, нажав на кнопку ниже.

Примечание: возможно, будет удобнее импортировать копию (Import a copy) коллекции к себе в Postman, чтобы без проблем отправлять запросы на  localhost.

[![Run in Postman](https://run.pstmn.io/button.svg)](https://god.gw.postman.com/run-collection/17781130-b1981306-1aae-4463-82d1-cc2439261205?action=collection%2Ffork&source=rip_markdown&collection-url=entityId%3D17781130-b1981306-1aae-4463-82d1-cc2439261205%26entityType%3Dcollection%26workspaceId%3D4b0bafc7-a688-4d2b-b01d-94789dc12117)

Спецификация API:
http://127.0.0.1/api/schema/swagger-ui/
http://127.0.0.1/api/schema/redoc/

### Автор проекта

Татьяна Овчинникова

https://github.com/tanja-ovc?tab=repositories

tanja.ovc@yandex.ru